graph TB
    %% External Dependencies Layer
    subgraph "ğŸŒ External Dependencies"
        TOKIO["ğŸ”„ Tokio<br/>â€¢ Async Runtime<br/>â€¢ RwLock, spawn<br/>â€¢ TcpListener"]
        AXUM["ğŸŒ Axum<br/>â€¢ Web Framework<br/>â€¢ Router, extractors<br/>â€¢ State management"]
        SERDE["ğŸ“¦ Serde<br/>â€¢ JSON Serialization<br/>â€¢ Derive macros<br/>â€¢ Error handling"]
        UUID["ğŸ†” UUID<br/>â€¢ Unique Identifiers<br/>â€¢ v4 generation<br/>â€¢ Display/Parse"]
        TOWER["ğŸ—ï¸ Tower<br/>â€¢ HTTP Middleware<br/>â€¢ CORS Layer<br/>â€¢ Service traits"]
        TRACING["ğŸ“Š Tracing<br/>â€¢ Structured Logging<br/>â€¢ HTTP tracing<br/>â€¢ Debug info"]
    end

    %% Application Entry Point
    subgraph "ğŸš€ Application Bootstrap"
        MAIN["main.rs<br/>ğŸ¯ Entry Point<br/>â”â”â”â”â”â”â”â”â”â”<br/>â€¢ #[tokio::main]<br/>â€¢ Router::new()<br/>â€¢ Route definitions<br/>â€¢ Middleware layers<br/>â€¢ Server binding<br/>â€¢ axum::serve()"]
    end

    %% Public API
    subgraph "ğŸ“š Public Interface"
        LIB["lib.rs<br/>ğŸ“– Library Root<br/>â”â”â”â”â”â”â”â”â”â”<br/>â€¢ pub use modules<br/>â€¢ API re-exports<br/>â€¢ Documentation"]
    end

    %% Request Processing Layer
    subgraph "ğŸ¯ HTTP Handlers"
        HANDLERS["handlers.rs<br/>ğŸŒ Request Processing<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ create_ticket_handler()<br/>â€¢ get_ticket_handler()<br/>â€¢ update_ticket_handler()<br/>â€¢ list_tickets_handler()<br/>â€¢ health_check()<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Axum extractors<br/>â€¢ Error conversion<br/>â€¢ HTTP status codes<br/>â€¢ JSON responses"]
    end

    %% Business Logic Layer
    subgraph "ğŸ’¾ Storage Layer"
        STORE["store.rs<br/>ğŸ—„ï¸ Data Operations<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ TicketStore struct<br/>â€¢ Arc&lt;RwLock&lt;HashMap&gt;&gt;<br/>â€¢ add_ticket()<br/>â€¢ get_ticket()<br/>â€¢ patch_ticket()<br/>â€¢ list_tickets()<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Async methods<br/>â€¢ Custom errors<br/>â€¢ Thread safety"]
    end

    %% Domain Model
    subgraph "ğŸ·ï¸ Domain Types"
        DATA["data.rs<br/>ğŸ“‹ Type Definitions<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Ticket struct<br/>â€¢ TicketId(Uuid)<br/>â€¢ TicketStatus enum<br/>â€¢ TicketDraft<br/>â€¢ TicketPatch<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Validation logic<br/>â€¢ Serde derives<br/>â€¢ Type safety<br/>â€¢ Business rules"]
    end

    %% Runtime Components
    subgraph "âš™ï¸ Runtime Environment"
        direction LR
        HTTP["ğŸŒ HTTP Server<br/>â€¢ Port 3000<br/>â€¢ TCP Listener<br/>â€¢ Request routing"]
        MEMORY["ğŸ’­ Memory Store<br/>â€¢ HashMap storage<br/>â€¢ In-process data<br/>â€¢ Thread-safe access"]
    end

    %% External Interaction
    CLIENT["ğŸ‘¤ HTTP Client<br/>â€¢ REST API calls<br/>â€¢ JSON payloads<br/>â€¢ Status responses"]

    %% Request Flow (solid arrows)
    CLIENT ==>|"HTTP Request"| HTTP
    HTTP ==>|"Route to handler"| HANDLERS
    HANDLERS ==>|"Business logic"| STORE
    STORE ==>|"Data access"| MEMORY
    STORE ==>|"Type operations"| DATA

    %% Response Flow (dashed arrows)
    DATA -.->|"Typed data"| STORE
    MEMORY -.->|"Raw data"| STORE
    STORE -.->|"Results"| HANDLERS
    HANDLERS -.->|"HTTP Response"| HTTP
    HTTP -.->|"JSON Response"| CLIENT

    %% Module Dependencies (thick arrows)
    MAIN ==>|"Imports & Setup"| HANDLERS
    MAIN ==>|"State injection"| STORE
    HANDLERS ==>|"Uses types"| DATA
    LIB ==>|"Re-exports"| HANDLERS
    LIB ==>|"Re-exports"| STORE
    LIB ==>|"Re-exports"| DATA

    %% External Crate Usage (dotted lines)
    MAIN -.->|"Uses"| AXUM
    MAIN -.->|"Uses"| TOKIO
    MAIN -.->|"Uses"| TOWER
    MAIN -.->|"Uses"| TRACING
    HANDLERS -.->|"Extractors"| AXUM
    HANDLERS -.->|"JSON"| SERDE
    STORE -.->|"RwLock"| TOKIO
    STORE -.->|"ID generation"| UUID
    DATA -.->|"Serialization"| SERDE
    DATA -.->|"UUID types"| UUID

    %% Styling
    classDef external fill:#e3f2fd,stroke:#1565c0,stroke-width:2px,color:#0d47a1
    classDef bootstrap fill:#f3e5f5,stroke:#7b1fa2,stroke-width:3px,color:#4a148c
    classDef interface fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px,color:#1b5e20
    classDef handlers fill:#fff8e1,stroke:#f57f17,stroke-width:2px,color:#e65100
    classDef storage fill:#fce4ec,stroke:#c2185b,stroke-width:2px,color:#880e4f
    classDef domain fill:#f1f8e9,stroke:#558b2f,stroke-width:2px,color:#33691e
    classDef runtime fill:#efebe9,stroke:#5d4037,stroke-width:2px,color:#3e2723
    classDef client fill:#e0f2f1,stroke:#00695c,stroke-width:2px,color:#004d40

    class TOKIO,AXUM,SERDE,UUID,TOWER,TRACING external
    class MAIN bootstrap
    class LIB interface
    class HANDLERS handlers
    class STORE storage
    class DATA domain
    class HTTP,MEMORY runtime
    class CLIENT client